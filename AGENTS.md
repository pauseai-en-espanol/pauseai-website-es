# Repository Guidelines

## Project Structure & Module Organization

Source lives under `src`, with SvelteKit routes in `src/routes` and shared UI or utilities in `src/lib`. Spanish copy and translation prompts sit in `messages/`; create or update locale JSON there before publishing. Markdown posts reside in `src/posts`, global styling in `src/styles`, and static assets in `static`. Automation scripts stay in `scripts/` (TypeScript executed via `tsx`), while build output belongs in `build/` and should be regenerated, not edited.

## Build, Test, and Development Commands

- `pnpm install`: Install dependencies after cloning or updating lockfiles.
- `pnpm dev`: Run a dry-run localization pass, then launch Vite on `http://localhost:37572`.
- `pnpm build`: Produce the Netlify-ready bundle and post-build indexing scripts.
- `pnpm preview`: Serve the production build locally for smoke tests.
- `pnpm test`: Execute the Vitest suite, covering scripts and critical clients.
- `pnpm check`: Run `svelte-check` and TypeScript validation for the app and scripts.
- `pnpm l10n`: Regenerate localization files when strings change.
- `pnpm lint` / `pnpm format`: Enforce ESLint + Knip and Prettier rules.

## Coding Style & Naming Conventions

Prettier (configured with two-space indentation) is the authority; rely on editor integrations or run `pnpm format`. Prefer TypeScript in scripts and components, using PascalCase for Svelte components and camelCase for helpers. Keep translation keys human-readable and grouped by feature, such as `home_action_*`. Avoid editing generated assets under `build/` or `static/processed`; regenerate them instead.

## Testing Guidelines

Vitest drives automated tests; place new specs beside the implementation using the `*.test.ts` suffix. When touching SvelteKit code, also run `pnpm check` to execute `svelte-check` and TypeScript validations. Failing tests or type errors block deployment, so repair them before opening a PR. Add regression tests when you change scripts under `scripts/l10n` or critical client code in `src/lib/clients`.

## Commit & Pull Request Guidelines

Use short, imperative commit subjects similar to existing history (e.g., `Actualiza héroe en español (#NNN)`). Squash fixups before merging. PRs should summarise user-facing changes, link related issues, include screenshots for visual tweaks, and confirm `pnpm test`, `pnpm lint`, and `pnpm build` have been run.

## Localization & Spanish Focus

This fork publishes the Spanish-only site. Keep `PARAGLIDE_LOCALES=es` in your `.env` during development, store Spanish translations in `messages/es.json` (create it if missing), and prune unused English keys that creep back in. Review autogenerated copy for tone and regional accuracy before shipping.
